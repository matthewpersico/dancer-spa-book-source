<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script>
$().ready(function() {
    var display_page = function(hash) {
        $(".page").hide();
        $(hash).show();
        $(location).attr('hash', hash);
    };

    $(".goto").click(function() {
        console.log($(this).attr("target"));
        display_page("#" + $(this).attr("target"));
    });

    $(window).on('hashchange',function() {
        var hash = $(location).attr('hash');
        console.log(hash);
        display_page(hash);
    });

    var hash = $(location).attr('hash');
    var page = $(hash);
    console.log(page);
    if (! page || page.attr("class") != "page") {
        hash = "#page1"
    }
    display_page(hash);
});
</script>

<div id="menu">
<a class="goto" id="goto_page1" target="page1">p1</a>
<a class="goto" id="goto_page2" target="page2">p2</a>
<a class="goto" id="goto_page3" target="page3">p3</a>
</div>
<hr>

<div class="page" id="page1">Page 1</div>
<div class="page" id="page2">Page 2</div>
<div class="page" id="page3">Page 3</div>
